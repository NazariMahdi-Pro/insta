<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستم مدیریت محتوای فراسیل و دیمانسیون</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #8a3ab9;
            --secondary: #4c68d7;
            --accent1: #fbad50;
            --accent2: #cd486b;
            --light: #fafafa;
            --dark: #2c2c2c;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
            --farasale-color: #405DE6;
            --dimansion-color: #E1306C;
            --nazari-color: #833AB4;
            --khales-color: #F56040;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #fdfcfb, #e2d1c3);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            animation: headerSlide 1s ease-out;
        }
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><circle cx="50" cy="50" r="40" fill="white"/></svg>');
            opacity: 0.1;
        }
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        .tabs {
            display: flex;
            margin-bottom: 25px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.8s ease-out;
        }
        .tab {
            flex: 1;
            padding: 18px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }
        .tab::before {
            content: '';
            position: absolute;
            bottom: 0;
            right: 50%;
            transform: translateX(50%);
            width: 0;
            height: 4px;
            background: var(--primary);
            transition: width 0.4s;
        }
        .tab:hover::before {
            width: 70%;
        }
        .tab.active {
            background: var(--primary);
            color: white;
        }
        .tab.active::before {
            width: 100%;
            background: white;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        .tab-content.active {
            display: block;
        }
        .weekly-schedule {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }
        .day-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }
        .day-card::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--farasale-color), var(--dimansion-color));
            transform: translateY(-100%);
            transition: transform 0.4s;
        }
        .day-card:hover {
            transform: translateY(-8px);
        }
        .day-card:hover::after {
            transform: translateY(0);
        }
        .day-header {
            text-align: center;
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 2px dashed #eee;
            font-weight: 700;
            font-size: 1.2rem;
        }
        .reels-task, .stories-task {
            margin-bottom: 20px;
        }
        .task-title {
            font-size: 1rem;
            color: #555;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .task-title i {
            margin-left: 8px;
            font-size: 1.3rem;
        }
        .page-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: white;
            margin-bottom: 12px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        .farasale-badge {
            background: var(--farasale-color);
        }
        .dimansion-badge {
            background: var(--dimansion-color);
        }
        .both-badge {
            background: linear-gradient(to right, var(--farasale-color), var(--dimansion-color));
        }
        .time-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            background: #f1f1f1;
            color: #555;
            margin-bottom: 12px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        /* استایل جدید برای نمایش مسئول */
        .task-assignee {
            font-size: 0.95rem;
            font-weight: 600;
            color: #333;
            background: #f0f8ff;
            padding: 8px 12px;
            border-radius: 8px;
            margin-top: 5px;
            border-right: 3px solid var(--primary);
        }
        .nazari-assignee {
            color: var(--nazari-color);
            border-right-color: var(--nazari-color);
        }
        .khales-assignee {
            color: var(--khales-color);
            border-right-color: var(--khales-color);
        }
        .content-planner {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
            animation: slideUp 0.8s ease-out;
        }
        .planner-header {
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            align-items: center;
            color: var(--primary);
        }
        .planner-header i {
            margin-left: 12px;
            color: var(--primary);
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        select, input, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #f9f9f9;
        }
        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(138, 58, 185, 0.1);
            background: white;
        }
        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
            font-weight: 500;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        .team-members {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-top: 30px;
        }
        .member-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: all 0.4s;
            position: relative;
            overflow: hidden;
        }
        .member-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        .member-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--nazari-color), var(--khales-color));
        }
        .member-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            position: relative;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        .nazari-avatar {
            background: linear-gradient(135deg, var(--nazari-color), #8a3ab9);
        }
        .khales-avatar {
            background: linear-gradient(135deg, var(--khales-color), #fbad50);
        }
        .member-name {
            font-weight: 700;
            font-size: 1.4rem;
            margin-bottom: 8px;
        }
        .nazari-name {
            color: var(--nazari-color);
        }
        .khales-name {
            color: var(--khales-color);
        }
        .member-role {
            color: #777;
            font-size: 1.1rem;
            margin-bottom: 20px;
            padding: 8px 15px;
            background: #f9f9f9;
            border-radius: 20px;
            display: inline-block;
        }
        .member-skills {
            text-align: right;
            margin-top: 20px;
        }
        .skill {
            margin-bottom: 12px;
        }
        .skill-name {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 5px;
        }
        .skill-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
        }
        .skill-level {
            height: 100%;
            border-radius: 10px;
        }
        .nazari-skill {
            background: linear-gradient(to right, var(--nazari-color), #8a3ab9);
        }
        .khales-skill {
            background: linear-gradient(to right, var(--khales-color), #fbad50);
        }
        /* استایل برای بخش تقویم محتوایی */
        .calendar-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border-right: 4px solid var(--primary);
        }
        .calendar-date {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .calendar-date i {
            margin-left: 8px;
        }
        .calendar-detail {
            font-size: 1rem;
            margin-bottom: 8px;
            color: #555;
        }
        .calendar-detail strong {
            color: #333;
            margin-left: 5px;
        }
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 25px;
            color: #777;
            font-size: 1rem;
            border-top: 1px solid #eee;
        }
        /* انیمیشن‌ها */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes headerSlide {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-7px); }
        }
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animated {
            animation-duration: 1s;
            animation-fill-mode: both;
        }
        .bounce {
            animation-name: bounce;
        }
        .pulse {
            animation-name: pulse;
            animation-duration: 2s;
            animation-iteration-count: infinite;
        }
        .float {
            animation-name: float;
            animation-duration: 3s;
            animation-iteration-count: infinite;
        }
        @media (max-width: 1200px) {
            .weekly-schedule {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 768px) {
            .weekly-schedule {
                grid-template-columns: 1fr;
            }
            .team-members {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>سیستم مدیریت محتوای اینستاگرام</h1>
        </header>
        <div class="tabs">
            <div class="tab active" data-tab="weekly">برنامه هفتگی</div>
            <div class="tab" data-tab="planner">برنامه‌ریزی محتوا</div>
            <div class="tab" data-tab="calendar">تقویم محتوایی</div>
            <div class="tab" data-tab="team">اعضای تیم</div>
        </div>
        <div class="tab-content active" id="weekly-tab">
            <div class="weekly-schedule">
                <!-- شنبه -->
                <div class="day-card animated">
                    <div class="day-header">شنبه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge farasale-badge">فراسیل</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص</div>
                        <div class="task-assignee khales-assignee">ادیت و انتشار: خالص</div>
                    </div>
                    <div class="stories-task">
                        <div class="task-title"><i class="fas fa-storyboard"></i> استوری</div>
                        <span class="time-badge">4-6</span>
                    </div>
                </div>
                <!-- یکشنبه -->
                <div class="day-card animated">
                    <div class="day-header">یکشنبه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge dimansion-badge">دیمانسیون</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص</div>
                        <div class="task-assignee nazari-assignee">ادیت و انتشار: نظری</div>
                    </div>
                    <div class="stories-task">
                        <div class="task-title"><i class="fas fa-storyboard"></i> استوری</div>
                        <span class="time-badge">4-6</span>
                    </div>
                </div>
                <!-- دوشنبه -->
                <div class="day-card animated">
                    <div class="day-header">دوشنبه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge farasale-badge">فراسیل</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص</div>
                        <div class="task-assignee khales-assignee">ادیت و انتشار: خالص</div>
                    </div>
                    <div class="stories-task">
                        <div class="task-title"><i class="fas fa-storyboard"></i> استوری</div>
                        <span class="time-badge">2-4</span>
                    </div>
                </div>
                <!-- سه شنبه -->
                <div class="day-card animated">
                    <div class="day-header">سه شنبه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge dimansion-badge">دیمانسیون</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص</div>
                        <div class="task-assignee nazari-assignee">ادیت و انتشار: نظری</div>
                    </div>
                    <div class="stories-task">
                        <div class="task-title"><i class="fas fa-storyboard"></i> استوری</div>
                        <span class="time-badge">2-4</span>
                    </div>
                </div>
                <!-- چهارشنبه -->
                <div class="day-card animated">
                    <div class="day-header">چهارشنبه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge farasale-badge">فراسیل</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص</div>
                        <div class="task-assignee nazari-assignee">ادیت و انتشار: نظری</div>
                    </div>
                    <div class="stories-task">
                        <div class="task-title"><i class="fas fa-storyboard"></i> استوری</div>
                        <span class="time-badge">3-7</span>
                    </div>
                </div>
                <!-- پنجشنبه -->
                <div class="day-card animated">
                    <div class="day-header">پنجشنبه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge dimansion-badge">دیمانسیون</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص</div>
                        <div class="task-assignee khales-assignee">ادیت و انتشار: خالص</div>
                    </div>
                    <div class="stories-task">
                        <div class="task-title"><i class="fas fa-storyboard"></i> استوری</div>
                        <span class="time-badge">4-8</span>
                    </div>
                    <div class="meeting-note">
                        <i class="fas fa-users"></i> جلسه چکاپ تیم ساعت 10 صبح
                    </div>
                </div>
                <!-- جمعه -->
                <div class="day-card animated">
                    <div class="day-header">جمعه</div>
                    <div class="reels-task">
                        <div class="task-title"><i class="fas fa-film"></i> ریلز</div>
                        <span class="page-badge both-badge">هر دو پیج</span>
                        <div class="task-assignee nazari-assignee">سناریو نویس: نظری و خالص</div>
                        <div class="task-assignee khales-assignee">فیلمبردار: خالص و نظری</div>
                        <div class="task-assignee khales-assignee">ادیت و انتشار: خالص</div>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="tab-content" id="planner-tab">
            <div class="content-planner">
                <div class="planner-header">
                    <i class="fas fa-pencil-alt"></i> برنامه‌ریزی محتوای هفتگی
                </div>
                <div class="form-group">
                    <label for="content-date">انتخاب تاریخ (شمسی):</label>
                    <input type="text" id="content-date" placeholder="مثال: ۱۴۰۳/۰۶/۲۵">
                </div>
                <div class="form-group">
                    <label for="content-page">انتخاب پیج:</label>
                    <select id="content-page">
                        <option value="farasale">فراسیل</option>
                        <option value="dimansion">دیمانسیون</option>
                        <option value="both">هر دو</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="content-type">نوع محتوا:</label>
                    <select id="content-type">
                        <option value="reels">ریلز</option>
                        <option value="story">استوری</option>
                        <option value="post">پست</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="content-topic">موضوع محتوا:</label>
                    <textarea id="content-topic" rows="3" placeholder="موضوع محتوا را اینجا بنویسید..."></textarea>
                </div>
                <div class="form-group">
                    <label for="scenario-writer">سناریو نویس:</label>
                    <select id="scenario-writer">
                        <option value="nazari">نظری</option>
                        <option value="khales">خالص</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filmmaker">فیلمبردار:</label>
                    <select id="filmmaker">
                        <option value="nazari">نظری</option>
                        <option value="khales">خالص</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editor">ادیتور:</label>
                    <select id="editor">
                        <option value="nazari">نظری</option>
                        <option value="khales">خالص</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="publisher">منتشر کننده:</label>
                    <select id="publisher">
                        <option value="nazari">نظری</option>
                        <option value="khales">خالص</option>
                    </select>
                </div>
                <button class="btn" id="save-plan-btn">ذخیره برنامه</button>
            </div>
        </div>
        <div class="tab-content" id="calendar-tab">
            <div id="content-calendar">
                <!-- محتواهای برنامه‌ریزی شده به صورت دینامیک اینجا نمایش داده می‌شوند -->
                <p style="text-align: center; padding: 40px; color: #888; font-size: 1.1rem;">
                    هنوز هیچ برنامه‌ای ذخیره نشده است. لطفاً از تب "برنامه‌ریزی محتوا" یک برنامه ایجاد کنید.
                </p>
            </div>
        </div>
        <div class="tab-content" id="team-tab">
            <div class="team-members">
                <div class="member-card animated">
                    <div class="member-avatar nazari-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="member-name nazari-name">نظری</div>
                    <div class="member-role">تولیدکننده محتوا</div>
                    <div class="member-skills">
                        <div class="skill">
                            <div class="skill-name">سناریو نویسی</div>
                            <div class="skill-bar">
                                <div class="skill-level nazari-skill" style="width: 95%"></div>
                            </div>
                        </div>
                        <div class="skill">
                            <div class="skill-name">فیلمبرداری</div>
                            <div class="skill-bar">
                                <div class="skill-level nazari-skill" style="width: 85%"></div>
                            </div>
                        </div>
                        <div class="skill">
                            <div class="skill-name">ادیت</div>
                            <div class="skill-bar">
                                <div class="skill-level nazari-skill" style="width: 75%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="member-card animated">
                    <div class="member-avatar khales-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="member-name khales-name">خالص</div>
                    <div class="member-role">تولیدکننده محتوا</div>
                    <div class="member-skills">
                        <div class="skill">
                            <div class="skill-name">فیلمبرداری</div>
                            <div class="skill-bar">
                                <div class="skill-level khales-skill" style="width: 90%"></div>
                            </div>
                        </div>
                        <div class="skill">
                            <div class="skill-name">ادیت</div>
                            <div class="skill-bar">
                                <div class="skill-level khales-skill" style="width: 95%"></div>
                            </div>
                        </div>
                        <div class="skill">
                            <div class="skill-name">انتشار</div>
                            <div class="skill-bar">
                                <div class="skill-level khales-skill" style="width: 98%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <p>سیستم مدیریت محتوای فراسیل و دیمانسیون - طراحی شده برای تیم تولید محتوا</p>
        </footer>
    </div>
    <script>
        // مدیریت تب‌ها
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.getAttribute('data-tab');
                // غیرفعال کردن تمام تب‌ها
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                // فعال کردن تب انتخاب شده
                tab.classList.add('active');
                document.getElementById(`${targetTab}-tab`).classList.add('active');
            });
        });

        // تنظیم تاریخ امروز (شمسی) برای اینپوت
        const today = new Date();
        const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
        const persianDate = today.toLocaleDateString('fa-IR', options).replace(/\//g, '/');
        document.getElementById('content-date').value = persianDate;

        // آرایه برای ذخیره برنامه‌های محتوایی
        let contentPlans = [];

        // تابع برای ذخیره برنامه
document.getElementById('save-plan-btn').addEventListener('click', async function() {
    const date = document.getElementById('content-date').value.trim();
    const page = document.getElementById('content-page').value;
    const type = document.getElementById('content-type').value;
    const topic = document.getElementById('content-topic').value.trim();
    const scenarioWriter = document.getElementById('scenario-writer').value;
    const filmmaker = document.getElementById('filmmaker').value;
    const editor = document.getElementById('editor').value;
    const publisher = document.getElementById('publisher').value;

    if (!date || !topic) {
        alert('لطفاً تاریخ و موضوع محتوا را وارد کنید.');
        return;
    }

    const newPlan = { date, page, type, topic, scenarioWriter, filmmaker, editor, publisher };

    // ارسال به سرور
    await fetch('/api/plans', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(newPlan)
    });

    // پاک کردن فرم
    document.getElementById('content-topic').value = '';

    // تازه‌سازی تقویم
    fetchPlans();
});

// تابع برای دریافت برنامه‌ها از سرور و نمایش
async function fetchPlans() {
    const res = await fetch('/api/plans');
    const contentPlans = await res.json();

    const calendarContainer = document.getElementById('content-calendar');
    if (contentPlans.length === 0) {
        calendarContainer.innerHTML = `<p style="text-align:center; padding:40px; color:#888; font-size:1.1rem;">
            هنوز هیچ برنامه‌ای ذخیره نشده است. لطفاً از تب "برنامه‌ریزی محتوا" یک برنامه ایجاد کنید.
        </p>`;
        return;
    }

    contentPlans.sort((a,b) => a.date.localeCompare(b.date));

    let html = '';
    contentPlans.forEach(plan => {
        const pageText = plan.page === 'farasale' ? 'فراسیل' : (plan.page === 'dimansion' ? 'دیمانسیون' : 'هر دو پیج');
        const typeText = plan.type === 'reels' ? 'ریلز' : (plan.type === 'story' ? 'استوری' : 'پست');
        const scenarioWriterText = plan.scenarioWriter === 'nazari' ? 'نظری' : 'خالص';
        const filmmakerText = plan.filmmaker === 'nazari' ? 'نظری' : 'خالص';
        const editorText = plan.editor === 'nazari' ? 'نظری' : 'خالص';
        const publisherText = plan.publisher === 'nazari' ? 'نظری' : 'خالص';

        html += `
            <div class="calendar-item">
                <div class="calendar-date"><i class="fas fa-calendar-day"></i> ${plan.date}</div>
                <div class="calendar-detail"><strong>پیج:</strong> ${pageText}</div>
                <div class="calendar-detail"><strong>نوع محتوا:</strong> ${typeText}</div>
                <div class="calendar-detail"><strong>موضوع:</strong> ${plan.topic}</div>
                <div class="calendar-detail"><strong>سناریو نویس:</strong> ${scenarioWriterText}</div>
                <div class="calendar-detail"><strong>فیلمبردار:</strong> ${filmmakerText}</div>
                <div class="calendar-detail"><strong>ادیتور:</strong> ${editorText}</div>
                <div class="calendar-detail"><strong>منتشر کننده:</strong> ${publisherText}</div>
            </div>
        `;
    });

    calendarContainer.innerHTML = html;
}

// دریافت برنامه‌ها هنگام بارگذاری
fetchPlans();

        // تابع برای به‌روزرسانی و نمایش تقویم محتوایی
        function updateContentCalendar() {
            const calendarContainer = document.getElementById('content-calendar');
            // مرتب‌سازی بر اساس تاریخ (فرض می‌کنیم تاریخ به صورت 'YYYY/MM/DD' است)
            contentPlans.sort((a, b) => {
                // تبدیل تاریخ شمسی به میلادی برای مقایسه دقیق نیاز به کتابخانه دارد.
                // برای سادگی، از مقایسه رشته‌ای استفاده می‌کنیم که برای فرمت 'YYYY/MM/DD' کار می‌کند.
                return a.date.localeCompare(b.date);
            });

            if (contentPlans.length === 0) {
                calendarContainer.innerHTML = `
                    <p style="text-align: center; padding: 40px; color: #888; font-size: 1.1rem;">
                        هنوز هیچ برنامه‌ای ذخیره نشده است. لطفاً از تب "برنامه‌ریزی محتوا" یک برنامه ایجاد کنید.
                    </p>
                `;
                return;
            }

            let html = '';
            contentPlans.forEach(plan => {
                // تبدیل مقادیر به متن قابل نمایش
                const pageText = plan.page === 'farasale' ? 'فراسیل' : (plan.page === 'dimansion' ? 'دیمانسیون' : 'هر دو پیج');
                const typeText = plan.type === 'reels' ? 'ریلز' : (plan.type === 'story' ? 'استوری' : 'پست');
                const scenarioWriterText = plan.scenarioWriter === 'nazari' ? 'نظری' : 'خالص';
                const filmmakerText = plan.filmmaker === 'nazari' ? 'نظری' : 'خالص';
                const editorText = plan.editor === 'nazari' ? 'نظری' : 'خالص';
                const publisherText = plan.publisher === 'nazari' ? 'نظری' : 'خالص';

                html += `
                    <div class="calendar-item">
                        <div class="calendar-date"><i class="fas fa-calendar-day"></i> ${plan.date}</div>
                        <div class="calendar-detail"><strong>پیج:</strong> ${pageText}</div>
                        <div class="calendar-detail"><strong>نوع محتوا:</strong> ${typeText}</div>
                        <div class="calendar-detail"><strong>موضوع:</strong> ${plan.topic}</div>
                        <div class="calendar-detail"><strong>سناریو نویس:</strong> ${scenarioWriterText}</div>
                        <div class="calendar-detail"><strong>فیلمبردار:</strong> ${filmmakerText}</div>
                        <div class="calendar-detail"><strong>ادیتور:</strong> ${editorText}</div>
                        <div class="calendar-detail"><strong>منتشر کننده:</strong> ${publisherText}</div>
                    </div>
                `;
            });

            calendarContainer.innerHTML = html;
        }

        // انیمیشن‌های اسکرول
        const animatedElements = document.querySelectorAll('.animated');
        function checkScroll() {
            animatedElements.forEach(element => {
                const elementPosition = element.getBoundingClientRect().top;
                const screenPosition = window.innerHeight / 1.3;
                if (elementPosition < screenPosition) {
                    element.style.opacity = 1;
                    element.style.transform = 'translateY(0)';
                }
            });
        }
        // مقداردهی اولیه موقعیت عناصر
        animatedElements.forEach(element => {
            element.style.opacity = 0;
            element.style.transform = 'translateY(30px)';
            element.style.transition = 'all 0.8s ease-out';
        });
        // بررسی اسکرول هنگام بارگذاری و اسکرول
        window.addEventListener('load', checkScroll);
        window.addEventListener('scroll', checkScroll);
        // انیمیشن‌های hover
        const dayCards = document.querySelectorAll('.day-card');
        dayCards.forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.classList.add('float');
            });
            card.addEventListener('mouseleave', () => {
                card.classList.remove('float');
            });
        });
    </script>

    <script src="/socket.io/socket.io.js"></script>
<script>
const socket = io(); // اتصال به سرور
</script>

</body>
</html>